<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drop Target Example</title>
</head>
<body>
<script>


    function getSdxTypes(ev) {
        var ret = [];
        for (var i in ev.dataTransfer.types) {
            if (ev.dataTransfer.types[i].toLowerCase().indexOf("application/i2b2-sdxtype+") === 0) {
                var sdxTypes = ev.dataTransfer.types[i].toUpperCase().split("+");
                sdxTypes.shift();
                ret = ret.concat(sdxTypes);
            }
        }
        return ret;
    };

    function drop_handler(ev) {
        ev.currentTarget.style.background = "red";
        ev.preventDefault();
        for (var i in ev.dataTransfer.types) {
            if (ev.dataTransfer.types[i].toLowerCase().indexOf("application/i2b2-sdxtype+") === 0) {
                var sdxTypes = ev.dataTransfer.types[i].toUpperCase().split("+");
                sdxTypes.shift();
                console.dir(sdxTypes);
                console.log(ev.dataTransfer.getData(ev.dataTransfer.types[i]));
            } else {
                var data = JSON.parse(ev.dataTransfer.getData(ev.dataTransfer.types[i]));
                console.warn(ev.dataTransfer.types[i]);
                console.dir(data);
            }
        }
        ev.currentTarget.style.background = "";
    }

    function dragover_handler(ev) {
        var types = getSdxTypes(ev);
        if (types.indexOf("WRK") !== -1 ) {
            // this is REQUIRED for proper drop
            ev.preventDefault();
        }
    }

    function dragenter_handler(ev) {
        ev.currentTarget.style.background = "lightyellow";
    }
    function dragleave_handler(ev) {
        ev.currentTarget.style.background = "";
    }

</script><div style="width:400px; height:400px; border: 1px solid black"
              ondrop="drop_handler(event)"
              ondragover="dragover_handler(event)"
              ondragenter="dragenter_handler(event)"
              ondragleave="dragleave_handler(event)">drop here</div>
</body>
</html>